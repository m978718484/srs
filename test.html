<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-type" name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width">
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>
        <li>
<label class="k" for="">
手机号码：</label>
<span class="v">
<input class="psp-text" style="width: 90px; ime-mode: disabled;" type="text" id="txtMobileCode"
name="txtMobileCode" maxlength="11" size="11" onpaste="return false" />
<input type="button" value="获取验证码" onclick="SetCode(true);" id="btnCode" />
</span><em id="tipTel"></em></li>
</body>
</html>

<script type="text/javascript">
function SetCode(n) {
if ($('#txtMobileCode').length = 11) {
if (n)
$.ajax({
type: "get",
dataType: "json",
url: "ajax.aspx?oper=telpcode&clienttime=" + (new Date().getTime()),
data: "txtMobileCode=" + $("#txtMobileCode").val(),
success: function (d) {
if (d.result == "1") {
alert("验证码发送成功");
GetNumber();
return true;
}
else {
alert("验证码发送失败");
return false;
}
}
});
else { }
}
else {
}
}
var count = 5;
function GetNumber() {
$("#btnCode").attr("disabled", "disabled");
$("#btnCode").val(count + "秒之后点击获取")
count--;
if (count > 0) {
setTimeout(GetNumber, 1000);
}
else {
$("#btnCode").val("点击获取验证码");
$("#btnCode").attr("disabled", "");
count = 5;
}
}
</script>